on:
  # Trigger analysis when pushing in master or pull requests, and when creating
  # a pull request.
  push:
    branches:
      - CUC-384-Github-Actions
  pull_request:
      types: [opened, synchronize, reopened]
name: SonarCloud
jobs:
  sonarcloud:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
      with:
        # Disabling shallow clone is recommended for improving relevancy of reporting
        fetch-depth: 0
    - name: SonarCloud Scan
      id: sonarcloud-scan
      uses: sonarsource/sonarcloud-github-action@master
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}
    - name: Send Teams notification on failure
      if: ${{ failure() }}
      uses: jdcargile/ms-teams-notification@v1.3
      with:
        github-token: ${{ github.token }} # this will use the runner's token.
        ms-teams-webhook-uri: ${{ secrets.MS_TEAMS_WEBHOOK_URI }}
        notification-summary: '<svg height="22" version="1.1" width="150" xml:space="preserve" xmlns:xlink="http://www.w3.org/1999/xlink" style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 1.41421;"><path d="M147.984 9.67a7.161 7.161 0 0 0-3.412-2.295v-.083a7.123 7.123 0 0 0-7.12-7.121 7.123 7.123 0 0 0-7.121 7.121v.096a7.12 7.12 0 0 0-3.962 10.466 7.125 7.125 0 0 0 8.388 3.07 7.117 7.117 0 0 0 2.715-1.676 7.119 7.119 0 0 0 10.512-9.579Zm-5.511 9.84a5.334 5.334 0 0 1-5.328-5.328.893.893 0 0 0-.896-.896.896.896 0 0 0-.897.896c0 1.281.348 2.538 1.006 3.638a5.324 5.324 0 0 1-7.702.062 5.327 5.327 0 0 1 5.66-8.709h.021c.205.068.401.162.582.28a.897.897 0 0 0 1.435-.402.888.888 0 0 0-.053-.684.898.898 0 0 0-.216-.275 4.014 4.014 0 0 0-1.159-.61 7.091 7.091 0 0 0-2.452-.434h-.343a5.324 5.324 0 0 1 2.697-4.41 5.325 5.325 0 0 1 7.121 1.774 5.326 5.326 0 0 1-1.406 7.204.895.895 0 0 0-.227 1.262.897.897 0 0 0 1.266.197 7.141 7.141 0 0 0 2.736-3.912 5.33 5.33 0 0 1 3.399 5.935 5.327 5.327 0 0 1-5.244 4.392v.02Z" fill="#F3702A"></path><path d="M1.423 16.318a7.773 7.773 0 0 0 3.437.971c1.209 0 1.707-.42 1.707-1.075s-.392-.972-1.888-1.47c-2.653-.894-3.676-2.339-3.637-3.859 0-2.39 2.05-4.2 5.224-4.2a8.591 8.591 0 0 1 3.611.732l-.71 2.756a6.297 6.297 0 0 0-2.771-.732c-.972 0-1.525.392-1.525 1.039 0 .605.501.92 2.078 1.47 2.442.84 3.466 2.079 3.492 3.965 0 2.388-1.889 4.157-5.565 4.157-1.68 0-3.175-.369-4.157-.894l.704-2.86ZM24.478 13.247c0 4.7-3.333 6.853-6.776 6.853-3.751 0-6.63-2.455-6.63-6.612 0-4.156 2.72-6.804 6.844-6.804 3.938 0 6.562 2.702 6.562 6.563Zm-9.296.132c0 2.206.92 3.858 2.627 3.858 1.559 0 2.546-1.558 2.546-3.858 0-1.917-.735-3.863-2.546-3.863-1.915 0-2.627 1.97-2.627 3.863ZM25.901 11.067c0-1.6-.052-2.967-.106-4.095h3.463l.182 1.757h.078A4.698 4.698 0 0 1 33.48 6.68c2.634.003 4.611 1.733 4.611 5.508v7.615h-3.998v-7.108c0-1.655-.577-2.783-2.021-2.783a2.125 2.125 0 0 0-2.035 1.497c-.115.32-.168.658-.158.998v7.407H25.9v-8.748ZM47.537 19.812l-.236-1.299h-.078c-.84 1.026-2.157 1.577-3.676 1.577-2.598 0-4.157-1.894-4.157-3.939 0-3.333 2.993-4.936 7.534-4.913v-.181c0-.684-.37-1.655-2.338-1.655a7.222 7.222 0 0 0-3.53.969l-.739-2.572c.894-.502 2.653-1.13 4.988-1.13 4.282 0 5.646 2.52 5.646 5.538v4.464c-.021 1.042.04 2.085.184 3.118l-3.598.023Zm-.47-6.064c-2.1-.026-3.728.476-3.728 2.021 0 1.027.683 1.525 1.577 1.525a2.18 2.18 0 0 0 2.078-1.47c.055-.224.082-.453.08-.683l-.007-1.393ZM53.058 11.197a78.6 78.6 0 0 0-.107-4.224h3.44l.145 2.359h.104c.658-1.863 2.232-2.65 3.466-2.65a4.3 4.3 0 0 1 .84.05v3.759a5.677 5.677 0 0 0-1.076-.107c-1.47 0-2.468.78-2.733 2.021-.054.295-.08.595-.078.894v6.514h-4.001v-8.616ZM71.36 19.337a8.51 8.51 0 0 1-3.637.738c-3.834 0-6.328-2.598-6.328-6.495 0-3.897 2.678-6.755 6.827-6.755a7.7 7.7 0 0 1 3.2.657l-.519 1.785a5.352 5.352 0 0 0-2.676-.605c-2.915 0-4.49 2.156-4.49 4.806 0 2.94 1.89 4.752 4.417 4.752.981.004 1.95-.21 2.837-.629l.37 1.746ZM73.018 1.168h2.312v18.644h-2.312V1.168ZM89.665 13.353c0 4.7-3.257 6.755-6.328 6.755-3.437 0-6.09-2.52-6.09-6.54 0-4.252 2.783-6.754 6.303-6.754 3.642 0 6.115 2.653 6.115 6.54Zm-10.082.13c0 2.783 1.6 4.884 3.858 4.884 2.205 0 3.858-2.078 3.858-4.936 0-2.156-1.076-4.884-3.806-4.884s-3.91 2.52-3.91 4.941v-.005ZM102.164 16.346c0 1.299.026 2.468.106 3.466h-2.049l-.13-2.079h-.052a4.787 4.787 0 0 1-4.201 2.364c-1.995 0-4.383-1.101-4.383-5.565v-7.43h2.31v7.038c0 2.414.738 4.045 2.837 4.045a3.25 3.25 0 0 0 3.255-3.284V7.107h2.312l-.005 9.239ZM115.925 1.168v15.36c0 1.13.026 2.419.107 3.284h-2.078l-.107-2.206h-.049c-.71 1.419-2.258 2.494-4.334 2.494-3.07 0-5.435-2.598-5.435-6.458-.023-4.227 2.598-6.828 5.698-6.828 1.943 0 3.255.92 3.832 1.943h.052V1.168h2.314Zm-2.312 11.11a4.179 4.179 0 0 0-.104-.972 3.394 3.394 0 0 0-3.333-2.676c-2.39 0-3.808 2.1-3.808 4.908 0 2.575 1.262 4.7 3.756 4.7a3.48 3.48 0 0 0 3.377-2.757c.076-.327.111-.662.104-.998l.008-2.205Z" style="fill: rgb(255, 255, 255);"></path></svg>God damn it. Sonar Cloud failed big time!'
        notification-color: 17a2b8
        timezone: Germany/Berlin